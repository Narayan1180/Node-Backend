<html>

<head>
<style>
    .product-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-top: 25px;
}

.card {
  background: #fff;
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  text-align: center;
}

.card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 8px;
}

.card h3 {
  font-size: 15px;
  margin: 10px 0;
}

.card button {
  background: #2563eb;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
}

@media (max-width: 1024px) {
  .product-grid { grid-template-columns: repeat(3, 1fr); }
}

@media (max-width: 768px) {
  .product-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 480px) {
  .product-grid { grid-template-columns: 1fr; }
}

</style>

</head>

<body>
<form action="/show/filter" method="GET" class="search-bar">
  <input
    type="text"
    name="search"
    placeholder="Search products..."
    value="<%= search || '' %>"
  />

  <select name="category">
    <option value="">All Categories</option>
    <option value="Foods" <%= category === 'foods' ? 'selected' : '' %>>Foods</option>
    <option value="snacks" <%= category === 'snacks' ? 'selected' : '' %>>Snacks</option>
    <option value="Electronics" <%= category === 'electronics' ? 'selected' : '' %>>Electronics</option>
     <option value="Books" <%= category === 'Books' ? 'selected' : '' %>>Books</option>

  </select>

  <button type="submit">Search</button>
</form>
<div class="product-grid">
  <% if (products.length === 0) { %>
    <p>No products found</p>
  <% } %>

  <% products.forEach(product => { %>
    <div class="card">
      <img src="<%= product.image %>" alt="<%= product.name %>" />

      <h3><%= product.name %></h3>
      <p>₹ <%= product.price %></p>
       <form action="/cart/add" method="POST">
         <input type="hidden" name="productId" value="<%= product._id %>">
         <button type="submit">Add to Cart</button>
         </form>
      
    </div>
  <% }) %>
</div>
<div class="pagination">
  <% if (currentPage > 1) { %>
    <a href="/show/filter?search=<%= search %>&category=<%= category %>&page=<%= currentPage - 1 %>">
      ← Prev
    </a>
  <% } %>

  <% for (let i = 1; i <= totalPages; i++) { %>
    <a
      href="/show/filter?search=<%= search %>&category=<%= category %>&page=<%= i %>"
      class="<%= i === currentPage ? 'active' : '' %>"
    >
      <%= i %>
    </a>
  <% } %>

  <% if (currentPage < totalPages) { %>
    <a href="/show/filter?search=<%= search %>&category=<%= category %>&page=<%= currentPage + 1 %>">
      Next →
    </a>
  <% } %>
</div>



</body>

<html>